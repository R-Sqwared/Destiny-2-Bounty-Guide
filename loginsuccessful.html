<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monochromatic Shader Details</title>
</head>
<body>
    <h1>Monochromatic Shader Details</h1>

    <div id="shader-details"></div>

    <script>
        // Retrieve the membership ID obtained during login
        const membershipId = localStorage.getItem('membershipId');

        async function fetchShaderDetails() {
            try {
                // Check if membership ID exists
                if (!membershipId) {
                    throw new Error('Membership ID not found');
                }

                // Construct the API request URL with the membership ID
                const apiUrl = `https://www.bungie.net/Platform/Destiny2/4/Profile/${membershipId}/?components=100`;

                // Fetch profile details using the constructed URL
                const response = await fetch(apiUrl, {
                    headers: {
                        'X-API-Key': '50c216c06cf042c3a5b82cdf3ec79bc6' // Replace with your Bungie API key
                    }
                });

                if (!response.ok) {
                    throw new Error('Failed to fetch profile details');
                }

                const data = await response.json();

                // Check if response contains profile data
                if (!data.Response || !data.Response.profileInventory || !data.Response.profileInventory.data || !data.Response.profileInventory.data.items) {
                    throw new Error('Profile inventory data not found in response');
                }

                const items = data.Response.profileInventory.data.items;

                // Find the Monochromatic Shader item
                const monochromaticShader = items.find(item => item.itemHash === 4248210736); // Item hash for Monochromatic Shader

                // Check if Monochromatic Shader was found
                if (!monochromaticShader) {
                    throw new Error('Monochromatic Shader not found in inventory');
                }

                // Extract shader icon URL and name
                const shaderIconUrl = `https://www.bungie.net${monochromaticShader.displayProperties.icon}`;
                const shaderName = monochromaticShader.displayProperties.name;

                // Display shader details on the page
                const shaderDetailsContainer = document.getElementById('shader-details');
                shaderDetailsContainer.innerHTML = `
                    <img src="${shaderIconUrl}" alt="${shaderName} Icon">
                    <h2>${shaderName}</h2>
                `;
            } catch (error) {
                console.error('Error fetching shader details:', error.message);
            }
        }

        // Call the fetchShaderDetails function when the page loads
        window.onload = fetchShaderDetails;
    </script>
</body>
</html>
