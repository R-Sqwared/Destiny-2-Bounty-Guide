<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Logged In</title>
    <!-- Include Axios library using CDN link -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script>
        const apiKey = '50c216c06cf042c3a5b82cdf3ec79bc6';
        const clientId = '46579';
        const clientSecret = '6VmpkRVe9ZQ7Hj-LHG4.igDJJnqlIffXveNwF0JqoVI';

        async function fetchBungieName() {
            try {
                const response = await axios.get(`https://www.bungie.net/Platform/User/GetMembershipsForCurrentUser/`, {
                    headers: {
                        'X-API-Key': apiKey,
                        'Authorization': `Basic ${btoa(clientId + ':' + clientSecret)}`
                    }
                });
                const bungieName = response.data.Response.bungieNetUser.displayName;
                document.getElementById('bungieName').textContent = `Welcome, ${bungieName}!`;
            } catch (error) {
                console.error('Error fetching Bungie name:', error);
            }
        }

        window.onload = fetchBungieName;
    </script>
</head>
<body>
    <h1 id='bungieName'; bungieName, ></h1>
</body>
</html>
